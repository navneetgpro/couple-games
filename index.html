<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Midnight Romance</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#ff1493">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Romance">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <header>
        <h1>Midnight Romance</h1>
        <div id="mood-selector" style="display:none; margin-top: 10px;">
            <select id="mood-dropdown" onchange="changeMood(this.value)"
                style="padding: 8px 15px; border-radius: 20px; border: 2px solid var(--primary); background: rgba(30, 20, 60, 0.9); color: white; font-size: 1rem; cursor: pointer; font-weight: bold;">
                <option value="mild">üåπ Mild</option>
                <option value="hot">üî• Hot</option>
                <option value="wild">üòà Wild</option>
            </select>
        </div>
    </header>

    <main id="view-mood" class="active-view">
        <div class="glass-panel">
            <h2 style="margin:0 0 20px 0; color:var(--primary); font-size:1.8rem;">What's Your Mood Tonight?</h2>
            <div class="level-btns">
                <button class="level-btn" onclick="setMood('mild')">Mild üåπ (Romantic & Sweet)</button>
                <button class="level-btn" onclick="setMood('hot')">Hot üî• (Passionate & Teasing)</button>
                <button class="level-btn" onclick="setMood('wild')">Wild üòà (Intense & Adventurous)</button>
            </div>
        </div>
    </main>

    <main id="view-dice">
        <div class="glass-panel">
            <h2 style="margin:0 0 15px 0; color:var(--primary)">Action Dice</h2>
            <div class="dice-row">
                <div class="dice-col">
                    <div class="scene">
                        <div class="cube" id="cube-0"></div>
                    </div>
                    <div class="dice-label">Action</div>
                </div>
                <div class="dice-col">
                    <div class="scene">
                        <div class="cube" id="cube-1"></div>
                    </div>
                    <div class="dice-label">Body Part</div>
                </div>
                <div class="dice-col">
                    <div class="scene">
                        <div class="cube" id="cube-2"></div>
                    </div>
                    <div class="dice-label">How</div>
                </div>
            </div>
            <button class="btn-main" onclick="rollDice()">ROLL THE DICE</button>
        </div>
    </main>

    <main id="view-td">
        <div class="glass-panel">
            <h2 style="margin:0 0 15px 0; color:var(--primary)">Truth or Dare</h2>
            <div id="td-result" class="td-box">Choose your fate...</div>
            <div style="display:flex; gap:15px; justify-content:center;">
                <button class="btn-main" style="background:linear-gradient(45deg,#00d2ff,#0099cc)"
                    onclick="doTD('truth')">TRUTH</button>
                <button class="btn-main" style="background:linear-gradient(45deg,#ff4b1f,#ff0066)"
                    onclick="doTD('dare')">DARE</button>
            </div>
        </div>
    </main>

    <main id="view-wheel">
        <div class="glass-panel" style="padding:30px 20px;">
            <h2 style="margin:0 0 20px 0; color:var(--primary)">Romance Wheel</h2>
            <div class="wheel-wrap">
                <div class="marker"></div>
                <div class="wheel" id="wheel"></div>
            </div>
            <div id="wheel-text"
                style="margin-top:25px; font-size:1.4rem; font-weight:bold; color:var(--gold); min-height:60px;">Spin
                for a surprise...</div>
            <button class="btn-main" onclick="spinWheel()">SPIN</button>
        </div>
    </main>

    <main id="view-cards">
        <div class="glass-panel" style="padding:30px;">
            <h2 style="margin:0 0 20px 0; color:var(--primary)">Intimate Cards</h2>
            <div class="card-scene" onclick="flipCard()">
                <div class="card" id="myCard">
                    <div class="card-face card-front">‚ù§Ô∏è</div>
                    <div class="card-face card-back" id="cardText">Tap to reveal your intimate challenge...</div>
                </div>
            </div>
            <p style="margin-top:20px; color:#aaa; text-align:center;">Tap card to flip</p>
        </div>
    </main>

    <nav style="display:none;" id="main-nav">
        <button class="active" onclick="setView('view-dice', this)"><span>üé≤</span>Dice</button>
        <button onclick="setView('view-td', this)"><span>üî•</span>T&D</button>
        <button onclick="setView('view-wheel', this)"><span>üé°</span>Wheel</button>
        <button onclick="setView('view-cards', this)"><span>‚ù§Ô∏è</span>Cards</button>
    </nav>

    <script type="module" src="app.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('Service Worker registered:', registration);
                    })
                    .catch(error => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>